## 第四章 网络层
[[考纲#网络层|408大纲]]
### 网络层功能
**异构网络互联**
 **路由与转发**
 路由：各个路由器互相配合，规划ip数据报的最佳转发路径
 转发：一台路由器，根据自己的转发表，将收到的IP数据从合适的接口转发出去
 **拥塞控制**
 拥塞：网络上出现过量分组，超负荷，引起网络性能下降
 控制方法：
 - 开环控制（静态）：部署网络时提前设计好预防方法
 - 闭环控制（动态）：发现拥塞，将拥塞信息传给路由器，路由器及时调整路由表控制拥塞
### IPv4
**ip数据报结构**
![[Pasted image 20250309182302.png]]
 
**IP数据报可变部分**

| 字段名         | 说明             |
| ----------- | -------------- |
| 可选字段（0-40B） | 可变长度，用于扩展功能    |
| 填充          | 补齐首部长度为4字节的整数倍 |

**P数据报整体结构**

| 组成部分 | 内容                      |
| ---- | ----------------------- |
| 首部   | 固定部分（20B） + 可变部分（0-40B） |
| 数据部分 | 上层协议传输的实际数据             |

**分片**
- 分片有可能在==源主机==或==任何一个路由器==中发生
- 只有**目的主机**才会队分片进行重组
- 分片可能**乱序**到达主机
- 片偏移以==x8B==为单位，所以除了最后一个分片外，**其它分片**数据都==必须为8B的整数倍==
[[IP数据报|deepseek问答环节]]
实践定位到ip数据报位置（实际deepseek帮我找到的）
![[Pasted image 20250309183306.png]]