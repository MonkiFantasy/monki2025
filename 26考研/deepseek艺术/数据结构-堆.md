### 堆排序与堆数据结构

堆排序是一种基于**堆**数据结构的排序算法，属于**选择排序**的一种。它的核心思想是通过构建堆，不断从堆顶取出最大（或最小）元素，从而实现排序。

---

### 1. **堆（Heap）的定义**
堆是一种**完全二叉树**，满足以下性质：
• **大根堆（Max Heap）**：每个节点的值都大于或等于其子节点的值。
• **小根堆（Min Heap）**：每个节点的值都小于或等于其子节点的值。

堆通常用数组实现，数组的下标表示节点在完全二叉树中的位置。

---

### 2. **大根堆与小根堆的对比**

| 特性           | 大根堆（Max Heap）                        | 小根堆（Min Heap）                        |
|----------------|------------------------------------------|------------------------------------------|
| **定义**       | 每个节点的值 ≥ 其子节点的值。             | 每个节点的值 ≤ 其子节点的值。             |
| **堆顶元素**   | 堆中的最大值。                           | 堆中的最小值。                           |
| **应用场景**   | 堆排序（升序）、优先队列（最大优先级）。 | 堆排序（降序）、优先队列（最小优先级）。 |
| **示例**       | `[9, 7, 5, 6, 3, 2]`                     | `[1, 3, 2, 6, 7, 5]`                     |

---

### 3. **大根堆和小根堆的示例**

#### 大根堆示例
```
        9
       / \
      7   5
     / \   \
    6   3   2
```
对应的数组：`[9, 7, 5, 6, 3, 2]`

#### 小根堆示例
```
        1
       / \
      3   2
     / \   \
    6   7   5
```
对应的数组：`[1, 3, 2, 6, 7, 5]`

---

### 4. **如何理解大根堆和小根堆**
• **大根堆**：
  • 堆顶元素是堆中的最大值。
  • 任何节点的值都大于或等于其子节点的值。
  • 适用于需要快速获取最大值的场景（如堆排序升序）。

• **小根堆**：
  • 堆顶元素是堆中的最小值。
  • 任何节点的值都小于或等于其子节点的值。
  • 适用于需要快速获取最小值的场景（如堆排序降序）。

---

### 5. **堆的性质**
• **完全二叉树**：堆是一棵完全二叉树，可以用数组高效存储。
• **父节点与子节点的关系**：
  • 对于节点 `i`（从 0 开始）：
    ◦ 左子节点：`2*i + 1`
    ◦ 右子节点：`2*i + 2`
    ◦ 父节点：`(i-1)/2`
• **堆的高度**：堆的高度为 `O(log n)`，其中 `n` 是堆中元素的数量。

---

### 6. **堆排序的基本步骤**
1. **构建堆**：
   • 将无序数组构建成一个大根堆（或小根堆）。
2. **交换堆顶元素**：
   • 将堆顶元素（最大值或最小值）与堆的最后一个元素交换。
3. **调整堆**：
   • 将剩余元素重新调整成堆。
4. **重复步骤 2 和 3**：
   • 直到堆中只有一个元素，排序完成。

---

### 7. **堆排序的示例**
#### 原始数组
`[4, 10, 3, 5, 1]`

#### 构建大根堆
```
        10
       /  \
      5    3
     / \
    4   1
```
对应的数组：`[10, 5, 3, 4, 1]`

#### 交换堆顶元素
• 交换 `10` 和 `1`，得到 `[1, 5, 3, 4, 10]`。
• 调整堆，得到 `[5, 4, 3, 1]`。

#### 重复交换和调整
• 交换 `5` 和 `1`，得到 `[1, 4, 3, 5, 10]`。
• 调整堆，得到 `[4, 1, 3]`。

• 交换 `4` 和 `3`，得到 `[3, 1, 4, 5, 10]`。
• 调整堆，得到 `[3, 1]`。

• 交换 `3` 和 `1`，得到 `[1, 3, 4, 5, 10]`。

#### 最终排序结果
`[1, 3, 4, 5, 10]`

---

### 8. **总结**
• **大根堆**：每个节点的值 ≥ 其子节点的值，堆顶是最大值。
• **小根堆**：每个节点的值 ≤ 其子节点的值，堆顶是最小值。
• **堆排序**：通过构建堆和不断交换堆顶元素实现排序。

堆排序的时间复杂度为 `O(n log n)`，是一种高效的排序算法。如果你有更多问题，欢迎继续提问！